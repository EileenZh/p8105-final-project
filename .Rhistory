nyc_jobs$salary_range_from <- with(nyc_jobs, ifelse(salary_frequency == "Daily", salary_range_from*365*5/7,salary_range_from))
nyc_jobs$salary_range_to <- with(nyc_jobs, ifelse(salary_frequency == "Daily", salary_range_to*365*5/7,salary_range_to))
mutate(nyc_jobs,salary_frequency="Annual")
nyc_jobs<-mutate(nyc_jobs,salary_frequency="Annual")
View(nyc_jobs)
salary<- function(x,y){
x <- with(nyc_jobs, ifelse(salary_frequency == "Hourly", x*1825,x))
y <- with(nyc_jobs, ifelse(salary_frequency == "Hourly", y*1825,y))
x <- with(nyc_jobs, ifelse(salary_frequency == "Daily", x*365*5/7,x))
y <- with(nyc_jobs, ifelse(salary_frequency == "Daily", y*365*5/7,y))
}
nyc_jobs<- read.csv("NYC_Jobs.csv") %>%
clean_names() %>%
filter(job_category!= " ",
full_time_part_time_indicator!=" ",
preferred_skills!= " ",
work_location!=" ") %>%
head(2500) #google map limited to 2500
nyc_jobs$job_category<- as.character(nyc_jobs$job_category)
nyc_jobs$salary_frequency<-as.character((nyc_jobs$salary_frequency))
nyc_jobs$salary_range_from<- as.numeric(nyc_jobs$salary_range_from)
nyc_jobs$salary_range_to<- as.numeric(nyc_jobs$salary_range_to)
salary<- function(x,y){
x <- with(nyc_jobs, ifelse(salary_frequency == "Hourly", x*1825,x))
y <- with(nyc_jobs, ifelse(salary_frequency == "Hourly", y*1825,y))
x <- with(nyc_jobs, ifelse(salary_frequency == "Daily", x*365*5/7,x))
y <- with(nyc_jobs, ifelse(salary_frequency == "Daily", y*365*5/7,y))
}
salary(nyc_jobs$salary_range_from,nyc_jobs$salary_range_to)
View(nyc_jobs)
category<- function(x){
x[str_detect(x,regex("engineering", ignore_case = TRUE))] <- "Engineering"
x[str_detect(x,regex("finance", ignore_case = TRUE))] <- "Finance"
x[str_detect(x,regex("legal", ignore_case = TRUE))] <- "Legal Affairs"
x[str_detect(x,regex("technology", ignore_case = TRUE))] <- "Technology"
x[str_detect(x,regex("policy", ignore_case = TRUE))] <- "Policy"
x[str_detect(x,regex("communi", ignore_case = TRUE))] <- "Community"
x[str_detect(x,regex("clerical", ignore_case = TRUE))] <- "Clerical"
x[str_detect(x,regex("social service", ignore_case = TRUE))] <- "Social service"
x[str_detect(x,regex("public safety", ignore_case = TRUE))] <- "Public safety"
x[str_detect(x,regex("administration", ignore_case = TRUE))] <- "Administration"
x[str_detect(x,regex("operations", ignore_case = TRUE))] <- "Maintance"
x[str_detect(x,regex("maintenance ", ignore_case = TRUE))] <- "Maintance"
}
map_df(nyc_jobs$job_category,category)
map_df(nyc_jobs$job_category[],category)
map_df(nyc_jobs,category)
View(nyc_jobs)
rm(list=ls())
nyc_jobs<- read.csv("NYC_Jobs.csv") %>%
clean_names() %>%
filter(job_category!= " ",
full_time_part_time_indicator!=" ",
preferred_skills!= " ",
work_location!=" ") %>%
head(2500) #google map limited to 2500
nyc_jobs$job_category<- as.character(nyc_jobs$job_category)
#combine job category (function?)
for (i in seq_along(nyc_jobs)) {
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("engineering", ignore_case = TRUE))] <- "Engineering"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("finance", ignore_case = TRUE))] <- "Finance"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("legal", ignore_case = TRUE))] <- "Legal Affairs"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("technology", ignore_case = TRUE))] <- "Technology"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("policy", ignore_case = TRUE))] <- "Policy"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("communi", ignore_case = TRUE))] <- "Community"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("clerical", ignore_case = TRUE))] <- "Clerical"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("social service", ignore_case = TRUE))] <- "Social service"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("public safety", ignore_case = TRUE))] <- "Public safety"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("administration", ignore_case = TRUE))] <- "Administration"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("operations", ignore_case = TRUE))] <- "Maintance"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("maintenance ", ignore_case = TRUE))] <- "Maintance"
}
# change unit of salary and calculate mean
nyc_jobs$salary_frequency<-as.character((nyc_jobs$salary_frequency))
nyc_jobs$salary_range_from<- as.numeric(nyc_jobs$salary_range_from)
nyc_jobs$salary_range_to<- as.numeric(nyc_jobs$salary_range_to)
nyc_jobs$salary_range_from <- with(nyc_jobs, ifelse(salary_frequency == "Hourly", salary_range_from*1825,salary_range_from))
nyc_jobs$salary_range_to <- with(nyc_jobs, ifelse(salary_frequency == "Hourly", salary_range_to*1825,salary_range_to))
nyc_jobs$salary_range_from <- with(nyc_jobs, ifelse(salary_frequency == "Daily", salary_range_from*365*5/7,salary_range_from))
nyc_jobs$salary_range_to <- with(nyc_jobs, ifelse(salary_frequency == "Daily", salary_range_to*365*5/7,salary_range_to))
nyc_jobs<-mutate(nyc_jobs,salary_frequency="Annual") %>%
mutate(salary_mean = (salary_range_to-salary_range_from)/2+salary_range_from)
nyc_jobs$work_location<-as.character(nyc_jobs$work_location)
geo <- geocode(location = nyc_jobs$work_location, output="latlon", source="google")
nyc_jobs<- nyc_jobs %>%
mutate(lon = geo$lon, lat = geo$lat) %>%
group_by(job_category)
nyc_jobs<- nyc_jobs %>%
mutate(lon = geo$lon, lat = geo$lat) %>%
group_by(job_category)
library(tidyverse)
library(haven)
library(readxl)
library(janitor)
library(ggmap)
library(plotly)
library(stringr)
nyc_jobs<- nyc_jobs %>%
mutate(lon = geo$lon, lat = geo$lat) %>%
group_by(job_category)
View(nyc_jobs)
View(geo)
View(geo)
nyc_jobs<- nyc_jobs %>%
mutate(lon = geo$lon, lat = geo$lat) %>%
group_by(job_category)
View(nyc_jobs)
table(nyc_jobs$job_category)
for (i in seq_along(nyc_jobs)) {
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("engineering", ignore_case = TRUE))] <- "Engineering"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("finance", ignore_case = TRUE))] <- "Finance"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("legal", ignore_case = TRUE))] <- "Legal Affairs"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("technology", ignore_case = TRUE))] <- "Technology"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("policy", ignore_case = TRUE))] <- "Policy"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("communi", ignore_case = TRUE))] <- "Community"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("clerical", ignore_case = TRUE))] <- "Clerical"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("social service", ignore_case = TRUE))] <- "Social service"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("public safety", ignore_case = TRUE))] <- "Public safety"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("administration", ignore_case = TRUE))] <- "Administration"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("operations", ignore_case = TRUE))] <- "Maintance"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("maintenance ", ignore_case = TRUE))] <- "Maintance"
}
library(tidyverse)
library(haven)
library(readxl)
library(janitor)
library(ggmap)
library(plotly)
library(stringr)
for (i in seq_along(nyc_jobs)) {
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("engineering", ignore_case = TRUE))] <- "Engineering"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("finance", ignore_case = TRUE))] <- "Finance"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("legal", ignore_case = TRUE))] <- "Legal Affairs"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("technology", ignore_case = TRUE))] <- "Technology"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("policy", ignore_case = TRUE))] <- "Policy"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("communi", ignore_case = TRUE))] <- "Community"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("clerical", ignore_case = TRUE))] <- "Clerical"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("social service", ignore_case = TRUE))] <- "Social service"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("public safety", ignore_case = TRUE))] <- "Public safety"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("administration", ignore_case = TRUE))] <- "Administration"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("operations", ignore_case = TRUE))] <- "Maintance"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("maintenance ", ignore_case = TRUE))] <- "Maintance"
}
table(nyc_jobs$job_category)
View(nyc_jobs)
table(nyc_jobs$job_category)
nyc_jobs<- read.csv("NYC_Jobs.csv") %>%
clean_names() %>%
filter(job_category!= " ",
full_time_part_time_indicator!=" ",
preferred_skills!= " ",
work_location!=" ") %>%
head(2500) #google map limited to 2500
nyc_jobs$job_category<- as.character(nyc_jobs$job_category)
for (i in seq_along(nyc_jobs)) {
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("engineering", ignore_case = TRUE))] <- "Engineering"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("finance", ignore_case = TRUE))] <- "Finance"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("legal", ignore_case = TRUE))] <- "Legal Affairs"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("technology", ignore_case = TRUE))] <- "Technology"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("policy", ignore_case = TRUE))] <- "Policy"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("communi", ignore_case = TRUE))] <- "Community"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("clerical", ignore_case = TRUE))] <- "Clerical"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("social service", ignore_case = TRUE))] <- "Social service"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("public safety", ignore_case = TRUE))] <- "Public safety"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("administration", ignore_case = TRUE))] <- "Administration"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("operations", ignore_case = TRUE))] <- "Maintance"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("maintenance ", ignore_case = TRUE))] <- "Maintance"
}
table(nyc_jobs$job_category)
View(nyc_jobs)
for (i in seq_along(nyc_jobs)) {
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("engineering", ignore_case = TRUE))] <- "Engineering"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("finance", ignore_case = TRUE))] <- "Finance"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("legal", ignore_case = TRUE))] <- "Legal Affairs"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("technology", ignore_case = TRUE))] <- "Technology"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("policy", ignore_case = TRUE))] <- "Policy"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("communi", ignore_case = TRUE))] <- "Community"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("clerical", ignore_case = TRUE))] <- "Clerical"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("social service", ignore_case = TRUE))] <- "Social service"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("public safety", ignore_case = TRUE))] <- "Public safety"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("administration", ignore_case = TRUE))] <- "Administration"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("operations", ignore_case = TRUE))] <- "Maintance"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("maintenance ", ignore_case = TRUE))] <- "Maintance"
}
View(nyc_jobs)
nyc_jobs<- read.csv("NYC_Jobs.csv") %>%
clean_names() %>%
filter(job_category!= " ",
full_time_part_time_indicator!=" ",
preferred_skills!= " ",
work_location!=" ") %>%
head(2500) #google map limited to 2500
nyc_jobs$job_category<- as.character(nyc_jobs$job_category)
for (i in seq_along(nyc_jobs)) {
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("engineering", ignore_case = TRUE))] <- "Engineering"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("finance", ignore_case = TRUE))] <- "Finance"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("legal", ignore_case = TRUE))] <- "Legal Affairs"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("technology", ignore_case = TRUE))] <- "Technology"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("policy", ignore_case = TRUE))] <- "Policy"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("communi", ignore_case = TRUE))] <- "Community"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("clerical", ignore_case = TRUE))] <- "Clerical"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("social service", ignore_case = TRUE))] <- "Social service"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("public safety", ignore_case = TRUE))] <- "Public safety"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("administration", ignore_case = TRUE))] <- "Administration"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("operations", ignore_case = TRUE))] <- "Maintance"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("maintenance ", ignore_case = TRUE))] <- "Maintance"
}
for (i in 1:2500) {
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("engineering", ignore_case = TRUE))] <- "Engineering"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("finance", ignore_case = TRUE))] <- "Finance"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("legal", ignore_case = TRUE))] <- "Legal Affairs"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("technology", ignore_case = TRUE))] <- "Technology"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("policy", ignore_case = TRUE))] <- "Policy"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("communi", ignore_case = TRUE))] <- "Community"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("clerical", ignore_case = TRUE))] <- "Clerical"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("social service", ignore_case = TRUE))] <- "Social service"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("public safety", ignore_case = TRUE))] <- "Public safety"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("administration", ignore_case = TRUE))] <- "Administration"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("operations", ignore_case = TRUE))] <- "Maintance"
nyc_jobs$job_category[[i]][str_detect(nyc_jobs$job_category[[i]],regex("maintenance ", ignore_case = TRUE))] <- "Maintance"
}
table(nyc_jobs$job_category)
nyc_jobs$salary_frequency<-as.character((nyc_jobs$salary_frequency))
nyc_jobs$salary_range_from<- as.numeric(nyc_jobs$salary_range_from)
nyc_jobs$salary_range_to<- as.numeric(nyc_jobs$salary_range_to)
#function?
nyc_jobs$salary_range_from <- with(nyc_jobs, ifelse(salary_frequency == "Hourly", salary_range_from*1825,salary_range_from))
nyc_jobs$salary_range_to <- with(nyc_jobs, ifelse(salary_frequency == "Hourly", salary_range_to*1825,salary_range_to))
nyc_jobs$salary_range_from <- with(nyc_jobs, ifelse(salary_frequency == "Daily", salary_range_from*365*5/7,salary_range_from))
nyc_jobs$salary_range_to <- with(nyc_jobs, ifelse(salary_frequency == "Daily", salary_range_to*365*5/7,salary_range_to))
nyc_jobs<-mutate(nyc_jobs,salary_frequency="Annual") %>%
mutate(salary_mean = (salary_range_to-salary_range_from)/2+salary_range_from)
nyc_jobs$work_location<-as.character(nyc_jobs$work_location)
nyc_jobs<- nyc_jobs %>%
mutate(lon = geo$lon, lat = geo$lat) %>%
group_by(job_category)
library(tidyverse)
library(haven)
library(readxl)
library(janitor)
library(ggmap)
library(plotly)
library(stringr)
Sys.setenv('MAPBOX_TOKEN' = 'pk.eyJ1IjoieHVxaW5nc2FsbHkiLCJhIjoiY2phZWh0djdyMHUzZTJ3bGR3MHFsdmIzZSJ9.vhYtu7zeAAuX6slhdDj6lA')
p <- nyc_jobs %>%
plot_mapbox(lat = ~lat, lon = ~lon,
size=2,
split = job_category,
mode = 'scattermapbox') %>%
add_markers(
text = ~paste(nyc_jobs$salary_mean), sep = "<br />",
color = ~salary_mean,size = I(8)) %>%
layout(title = 'Work Location',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
p
View(nyc_jobs)
p <- nyc_jobs %>%
plot_mapbox(lat = ~lat, lon = ~lon,
size=2,
split = job_category,
mode = 'scattermapbox')
p <- nyc_jobs %>%
plot_mapbox(lat = ~lat, lon = ~lon,
size=2,
split = nyc_jobs$job_category,
mode = 'scattermapbox')
p <- nyc_jobs %>%
plot_mapbox(lat = ~lat, lon = ~lon,
size=2,
split = nyc_jobs$job_category,
mode = 'scattermapbox') %>%
add_markers(
text = ~paste(nyc_jobs$salary_mean), sep = "<br />",
color = ~salary_mean,size = I(8)) %>%
layout(title = 'Work Location',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
p
p <- nyc_jobs %>%
plot_mapbox(lat = ~lat, lon = ~lon,
size=2,
split = nyc_jobs$job_category,
mode = 'scattermapbox') %>%
add_markers(
text = ~paste(nyc_jobs$salary_mean), sep = "<br />",
color = ~job$job_category,size = I(8)) %>%
layout(title = 'Work Location',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
p
p <- nyc_jobs %>%
plot_mapbox(lat = ~lat, lon = ~lon,
size=2,
split = nyc_jobs$job_category,
mode = 'scattermapbox') %>%
add_markers(
text = ~paste(nyc_jobs$salary_mean), sep = "<br />",
color = ~job_category,size = I(8)) %>%
layout(title = 'Work Location',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
p
p <- nyc_jobs %>%
plot_mapbox(lat = ~lat, lon = ~lon,
size=2,
split = nyc_jobs$job_category,
mode = 'scattermapbox') %>%
add_markers(
text = ~paste("mean salary":nyc_jobs$salary_mean), sep = "<br />",
color = ~job_category,size = I(8)) %>%
layout(title = 'Work Location',
font = list(color='black'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
p
p <- nyc_jobs %>%
plot_mapbox(lat = ~lat, lon = ~lon,
size=2,
split = nyc_jobs$job_category,
mode = 'scattermapbox') %>%
add_markers(
text = "mean salary"~paste(nyc_jobs$salary_mean), sep = "<br />",
color = ~job_category,size = I(8)) %>%
layout(title = 'Work Location',
font = list(color='black'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
p
p <- nyc_jobs %>%
plot_mapbox(lat = ~lat, lon = ~lon,
size=2,
split = nyc_jobs$job_category,
mode = 'scattermapbox') %>%
add_markers(
text = "mean salary"~paste(nyc_jobs$salary_mean), sep = "<br />",
color = ~job_category,size = I(9)) %>%
layout(title = 'Work Location',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
p
p <- nyc_jobs %>%
mutate(text_label = str_c("Annual mean salary$:",salary_mean)) %>%
plot_mapbox(lat = ~lat, lon = ~lon,
size=2,
split = nyc_jobs$job_category,
mode = 'scattermapbox') %>%
add_markers(
text = ~paste(nyc_jobs$text_label), sep = "<br />",
color = ~job_category,size = I(9)) %>%
layout(title = 'Work Location',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
p
p <- nyc_jobs %>%
mutate(text_label = str_c("Annual mean salary$:",salary_mean))
p <- nyc_jobs %>%
mutate(text_label = str_c("Annual mean salary$:",salary_mean)) %>%
plot_mapbox(lat = ~lat, lon = ~lon,
size=2,
split = nyc_jobs$job_category,
mode = 'scattermapbox') %>%
add_markers(
text = ~paste(nyc_jobs$text_label), sep = "<br />",
color = ~job_category,size = I(9)) %>%
layout(title = 'Work Location',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
p
p <- nyc_jobs %>%
mutate(text_label = str_c("Annual mean salary$:",salary_mean)) %>%
plot_mapbox(lat = ~lat, lon = ~lon,
size=2,
split = nyc_jobs$job_category,
mode = 'scattermapbox') %>%
add_markers(
text = ~text_label,
color = ~job_category,size = I(9)) %>%
layout(title = 'Work Location',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
p
nyc_jobs
filter(lon<73.75, lon<74.23,lat<40.87, lat>40.58) %>%
mutate(text_label = str_c("mean salary: $", salary_mean)) %>%
plot_ly(x = ~lon, y = ~lat, type = "scatter", mode = "markers",
alpha = 0.5,
color = ~salary_mean,
text = ~text_label) %>%
labs(title = "Work location in NYC")
View(nyc_jobs)
myLocation_nyc = c(-74.23,40.58,-73.75,40.87)
myMap_nyc <- get_map(location=myLocation_nyc,
source = "stamen",maptype = "watercolor", crop = FALSE)
ggmap(myMap_nyc)+
geom_point(aes(x = lon, y = lat), data = nyc_jobs,
alpha = .5, color="darkred",size = 3) +
labs(title = "Work location in NYC")
ggmap(myMap_nyc)+
geom_point(aes(x = lon, y = lat), data = nyc_jobs,
alpha = .5, color="darkred",size = 3) +
labs(title = "Work location in NYC")
nyc_jobs
filter(lon<73.75, lon<74.23,lat<40.87, lat>40.58) %>%
mutate(text_label = str_c("mean salary: $", salary_mean)) %>%
plot_ly(x = ~lon, y = ~lat, type = "scatter", mode = "markers",
alpha = 0.5,
color = ~salary_mean,
text = ~text_label) %>%
labs(title = "Work location in NYC")
nyc_jobs %>%
filter(lon<73.75, lon<74.23,lat<40.87, lat>40.58) %>%
mutate(text_label = str_c("mean salary: $", salary_mean)) %>%
plot_ly(x = ~lon, y = ~lat, type = "scatter", mode = "markers",
alpha = 0.5,
color = ~salary_mean,
text = ~text_label) %>%
labs(title = "Work location in NYC")
plot_ly(nyc_jobs,x = ~lon, y = ~lat, type = "scatter", mode = "markers",
alpha = 0.5,
color = ~salary_mean,
text = ~text_label) %>%
labs(title = "Work location in NYC")
plot_ly(nyc_jobs,x = ~lon, y = ~lat, type = "scatter", mode = "markers",
alpha = 0.5,
color = ~salary_mean,
text = ~text_label)
plot_ly(nyc_jobs,x = ~lon, y = ~lat, type = "scatter", mode = "markers",
alpha = 0.5,
color = ~salary_mean)
View(nyc_jobs)
ggplot(nyc_jobs,aes(y = salary_mean)) %>%
geom_boxplot(color = job_category)
ggplot(nyc_jobs,aes(y = salary_mean)) %>%
geom_boxplot(color = nyc_jobs$job_category)
nyc_jobs %>%
group_by(job_category) %>%
ggplot(aes(y = salary_mean)) %>%
geom_boxplot()
nyc_jobs %>%
group_by(job_category) %>%
ggplot(aes(x= job_category, y = salary_mean)) %>%
geom_boxplot()
nyc_jobs %>%
group_by(job_category) %>%
ggplot(aes(x= job_category, y = salary_mean)) +
geom_boxplot()
nyc_jobs %>%
plot_ly(y = ~salary_mean, color = ~job_category, type = "box",
colors = "Set2")
nyc_jobs %>%
plot_ly(y = ~salary_mean, color = ~job_category, type = "box",
colors = "Set2") %>%
layout(title = "Annual average salary distribution in 12 job categories")
